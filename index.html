<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>הזמנת מגרש טניס - מרכז קהילתי עם שלום</title>
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/2991/2991119.png" type="image/png">
  <style>
    :root {
      --primary: #1a73e8;
      --light: #f8f9fa;
      --dark: #333;
    }
    * {box-sizing:border-box;margin:0;padding:0;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
    body{
      background:linear-gradient(rgba(0,0,0,.6),rgba(0,0,0,.6)),
                 url('https://images.unsplash.com/photo-1622278494980-874d6f8bf7ed?ixlib=rb-4.0.3&auto=format&fit=crop&w=1950&q=80')
                 center/cover no-repeat fixed;
      color:#fff;line-height:1.6;min-height:100vh;padding:20px;
    }
    .container{
      max-width:800px;margin:40px auto;background:rgba(255,255,255,.97);color:var(--dark);
      border-radius:15px;padding:30px;box-shadow:0 10px 40px rgba(0,0,0,.3);
      text-align:center;position:relative;
    }
    .lang-switch{
      position:absolute;top:15px;left:15px;z-index:10;
    }
    .lang-btn{
      background:var(--primary);color:#fff;border:none;padding:8px 16px;
      border-radius:6px;cursor:pointer;font-size:0.9rem;transition:.2s;
    }
    .lang-btn:hover{background:#0d47a1;}
    h1{
      color:var(--primary);margin-bottom:25px;font-size:2rem;
    }
    .courts-grid{
      display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:15px;
      margin:30px 0;
    }
    .court-btn{
      background:#fff;border:2px solid var(--primary);color:var(--primary);
      padding:15px;border-radius:10px;cursor:pointer;font-weight:600;
      transition:.3s;box-shadow:0 4px 10px rgba(0,0,0,.1);
    }
    .court-btn:hover,.court-btn.selected{
      background:var(--primary);color:#fff;transform:translateY(-3px);
    }
    .form-group{
      margin:20px 0;text-align:right;
    }
    label{
      display:block;margin-bottom:8px;font-weight:600;
    }
    select{
      width:100%;padding:12px;border:1px solid #ccc;border-radius:6px;font-size:1rem;
    }
    .price-box{
      background:#e8f5e9;padding:15px;border-radius:10px;margin:20px 0;
      font-size:1.1rem;font-weight:600;color:#1b5e20;
    }
    .submit-btn{
      background:var(--primary);color:#fff;border:none;padding:14px 24px;
      font-size:1.1rem;border-radius:8px;cursor:pointer;width:100%;margin-top:20px;
      transition:.2s;
    }
    .submit-btn:hover{background:#0d47a1;}
    .submit-btn:disabled{background:#aaa;cursor:not-allowed;}
  </style>
</head>
<body>
<div class="container">
  <!-- כפתור החלפת שפה -->
  <div class="lang-switch">
    <button class="lang-btn" id="langBtn">English</button>
  </div>

  <h1 id="pageTitle">הזמנת מגרש טניס</h1>
  <p id="subtitle">בחר מגרש, יום, שעה ומשך</p>

  <div class="courts-grid" id="courtsGrid">
    <!-- יתמלא דינמית -->
  </div>

  <div class="form-group">
    <label for="daySelect" id="dayLabel">בחר יום</label>
    <select id="daySelect">
      <option value="">-- בחר יום --</option>
    </select>
  </div>

  <div class="form-group">
    <label for="timeSelect" id="timeLabel">בחר שעה</label>
    <select id="timeSelect" disabled>
      <option value="">-- בחר שעה --</option>
    </select>
  </div>

  <div class="form-group">
    <label for="durationSelect" id="durationLabel">משך זמן</label>
    <select id="durationSelect" disabled>
      <option value="">-- בחר משך --</option>
    </select>
  </div>

  <div class="price-box" id="priceBox" style="display:none;">
    סה"כ לתשלום: <span id="totalPrice">0</span> ₪
  </div>

  <button class="submit-btn" id="submitBtn" disabled>המשך לפרטים אישיים</button>
</div>

<script>
  // === תרגומים ===
  const translations = {
    he: {
      pageTitle: "הזמנת מגרש טניס",
      subtitle: "בחר מגרש, יום, שעה ומשך",
      dayLabel: "בחר יום",
      timeLabel: "בחר שעה",
      durationLabel: "משך זמן",
      totalText: "סה\"כ לתשלום:",
      continueBtn: "המשך לפרטים אישיים",
      days: ["ראשון", "שני", "שלישי", "רביעי", "חמישי", "שישי", "שבת"],
      hours: ["08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00"],
      duration1: "שעה אחת - 80 ₪",
      duration2: "שעתיים - 150 ₪"
    },
    en: {
      pageTitle: "Tennis Court Booking",
      subtitle: "Choose court, day, time and duration",
      dayLabel: "Select Day",
      timeLabel: "Select Time",
      durationLabel: "Duration",
      totalText: "Total to pay:",
      continueBtn: "Continue to Personal Details",
      days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
      hours: ["08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00", "16:00", "17:00", "18:00", "19:00", "20:00", "21:00"],
      duration1: "1 Hour - 80 ₪",
      duration2: "2 Hours - 150 ₪"
    }
  };

  let currentLang = 'he';
  let selectedCourt = '';
  let selectedDay = '';
  let selectedTime = '';
  let selectedDuration = '';

  // === אלמנטים ===
  const elements = {
    pageTitle: document.getElementById('pageTitle'),
    subtitle: document.getElementById('subtitle'),
    dayLabel: document.getElementById('dayLabel'),
    timeLabel: document.getElementById('timeLabel'),
    durationLabel: document.getElementById('durationLabel'),
    totalText: document.getElementById('totalPrice').previousSibling,
    continueBtn: document.getElementById('submitBtn'),
    daySelect: document.getElementById('daySelect'),
    timeSelect: document.getElementById('timeSelect'),
    durationSelect: document.getElementById('durationSelect'),
    priceBox: document.getElementById('priceBox'),
    langBtn: document.getElementById('langBtn')
  };

  // === החלפת שפה ===
  function switchLanguage(lang) {
    currentLang = lang;
    const t = translations[lang];

    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'he' ? 'rtl' : 'ltr';

    elements.pageTitle.textContent = t.pageTitle;
    elements.subtitle.textContent = t.subtitle;
    elements.dayLabel.textContent = t.dayLabel;
    elements.timeLabel.textContent = t.timeLabel;
    elements.durationLabel.textContent = t.durationLabel;
    elements.totalText.textContent = t.totalText + ' ';
    elements.continueBtn.textContent = t.continueBtn;
    elements.langBtn.textContent = lang === 'he' ? 'English' : 'עברית';

    // עדכון ימים
    elements.daySelect.innerHTML = '<option value="">-- ' + (lang === 'he' ? 'בחר יום' : 'Select Day') + ' --</option>';
    t.days.forEach(day => {
      const opt = document.createElement('option');
      opt.value = opt.textContent = day;
      elements.daySelect.appendChild(opt);
    });

    // עדכון שעות (אם כבר נבחר יום)
    if (selectedDay) updateTimeOptions();

    // עדכון משך
    elements.durationSelect.innerHTML = `
      <option value="">-- ${lang === 'he' ? 'בחר משך' : 'Select Duration'} --</option>
      <option value="1">${t.duration1}</option>
      <option value="2">${t.duration2}</option>
    `;

    // עדכון כיוון טקסט
    document.querySelectorAll('input, select, textarea').forEach(el => {
      el.style.textAlign = lang === 'he' ? 'right' : 'left';
    });
  }

  // === יצירת מגרשים ===
  function createCourts() {
    const grid = document.getElementById('courtsGrid');
    for (let i = 1; i <= 6; i++) {
      const btn = document.createElement('div');
      btn.className = 'court-btn';
      btn.textContent = currentLang === 'he' ? `מגרש ${i}` : `Court ${i}`;
      btn.onclick = () => selectCourt(btn, i);
      grid.appendChild(btn);
    }
  }

  function selectCourt(btn, num) {
    document.querySelectorAll('.court-btn').forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');
    selectedCourt = currentLang === 'he' ? `מגרש ${num}` : `Court ${num}`;
    elements.daySelect.disabled = false;
    resetSelection('day');
  }

  // === עדכון אפשרויות זמן ===
  function updateTimeOptions() {
    const t = translations[currentLang];
    elements.timeSelect.innerHTML = '<option value="">-- ' + (currentLang === 'he' ? 'בחר שעה' : 'Select Time') + ' --</option>';
    t.hours.forEach(h => {
      const opt = document.createElement('option');
      opt.value = opt.textContent = h;
      elements.timeSelect.appendChild(opt);
    });
    elements.timeSelect.disabled = false;
  }

  // === חישוב מחיר ===
  function calculatePrice() {
    if (selectedDuration) {
      const price = selectedDuration === '1' ? 80 : 150;
      document.getElementById('totalPrice').textContent = price;
      elements.priceBox.style.display = 'block';
      elements.continueBtn.disabled = false;
    }
  }

  // === איפוס בחירות ===
  function resetSelection(from) {
    if (from === 'day') {
      selectedDay = '';
      elements.timeSelect.innerHTML = '<option value="">-- בחר שעה --</option>';
      elements.timeSelect.disabled = true;
    }
    if (from === 'day' || from === 'time') {
      selectedTime = '';
      elements.durationSelect.innerHTML = '<option value="">-- בחר משך --</option>';
      elements.durationSelect.disabled = true;
    }
    if (from !== 'duration') {
      selectedDuration = '';
      elements.priceBox.style.display = 'none';
      elements.continueBtn.disabled = true;
    }
  }

  // === אירועים ===
  elements.daySelect.addEventListener('change', function() {
    selectedDay = this.value;
    if (selectedDay) {
      updateTimeOptions();
      resetSelection('day');
    }
  });

  elements.timeSelect.addEventListener('change', function() {
    selectedTime = this.value;
    if (selectedTime) {
      elements.durationSelect.disabled = false;
      resetSelection('time');
    }
  });

  elements.durationSelect.addEventListener('change', function() {
    selectedDuration = this.value;
    if (selectedDuration) {
      calculatePrice();
    }
  });

  elements.continueBtn.addEventListener('click', function() {
    const url = `booking-details.html?court=${encodeURIComponent(selectedCourt)}&day=${encodeURIComponent(selectedDay)}&time=${encodeURIComponent(selectedTime)}&duration=${selectedDuration}&total=${selectedDuration === '1' ? 80 : 150}`;
    window.location.href = url;
  });

  elements.langBtn.addEventListener('click', function() {
    switchLanguage(currentLang === 'he' ? 'en' : 'he');
    createCourts(); // עדכן מגרשים
  });

  // === אתחול ===
  createCourts();
  switchLanguage('he'); // ברירת מחדל
</script>
</body>
</html>
